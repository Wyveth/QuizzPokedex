<?xml version="1.0" encoding="UTF-8"?>
<views:MvxContentPage x:TypeArguments="viewmodel:PokedexViewModel"
                      xmlns="http://xamarin.com/schemas/2014/forms"
                      xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                      x:Class="QuizzPokedex.UI.Views.PokedexView"
                      NavigationPage.HasNavigationBar="False"
                      xmlns:animation="clr-namespace:Lottie.Forms;assembly=Lottie.Forms"
                      xmlns:viewmodel="clr-namespace:QuizzPokedex.ViewModels;assembly=QuizzPokedex"
                      xmlns:views="clr-namespace:MvvmCross.Forms.Views;assembly=MvvmCross.Forms"
                      xmlns:converters="clr-namespace:QuizzPokedex.UI.Converters"
                      BackgroundColor="#FFFFFF">

    <views:MvxContentPage.Resources>
        <ResourceDictionary>
            <converters:ByteToImageSourceConverter x:Key="ByteToImageSourceConverter"/>
        </ResourceDictionary>
    </views:MvxContentPage.Resources>
    
    <ContentPage.Content>
        <StackLayout>
            <AbsoluteLayout>
                <animation:AnimationView Animation="Resources.lf30_editor_j21rvxzk.json" AnimationSource="EmbeddedResource" HeightRequest="70" WidthRequest="70"
                    RepeatMode="Restart" HorizontalOptions="Start" VerticalOptions="StartAndExpand"  Rotation="180" ScaleX="1.5" ScaleY="1.5" 
                    Command="{Binding NavigationBackCommandAsync}"/>
            </AbsoluteLayout>

            <CollectionView ItemsSource="{Binding Pokemons}" SelectionMode="Single" SelectedItem="{Binding SelectedPokemon}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" Span="3" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="10,20,0,0" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="3*" />
                                <RowDefinition Height="3*" />
                            </Grid.RowDefinitions>
                            
                            <Image Source="{Binding DataImg, Converter={StaticResource ByteToImageSourceConverter}}"
                                   Grid.Row="0"
                                   Aspect="AspectFit"
                                   WidthRequest="60"
                                   HeightRequest="60">
                            </Image>

                            <StackLayout Grid.Row="1">
                                <Label Grid.Column="1"
                                       VerticalOptions="Center" FontSize="Micro"
                                       Text="{Binding Name}"
                                       FontAttributes="Bold"
                                   HorizontalOptions="Center">
                                </Label>
                                <Label Text="{Binding Number}"
                                       Grid.Row="1"
                                       Grid.Column="1"
                                       VerticalOptions="Start"
                                       FontSize="Micro"
                                       FontAttributes="Italic"
                                   HorizontalOptions="Center"/>
                            </StackLayout>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
    </ContentPage.Content>
</views:MvxContentPage>